<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>G·ª≠i Anh ‚Äî Ph√∫ anh c·ª•a em</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1: #ffafbd;
      --bg2: #ffc3a0;
      --accent: #ff4d6d;
      --card: rgba(255,255,255,0.9);
      --glass: rgba(255,255,255,0.12);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body{
      background: linear-gradient(135deg,var(--bg1),var(--bg2));
      display:flex;align-items:center;justify-content:center;padding:24px;
      overflow:hidden;
    }

    /* floating heart background */
    .hearts {position:fixed;inset:0;pointer-events:none;overflow:hidden}
    .heart{
      position:absolute;bottom:-10vh;width:24px;height:24px;transform:rotate(-45deg);
      animation: rise linear infinite;opacity:0.9;
    }
    .heart::before,.heart::after{content:'';position:absolute;width:24px;height:24px;border-radius:50%;background:var(--accent)}
    .heart::before{top:-12px;left:0}
    .heart::after{left:12px;top:0}
    @keyframes rise{
      0%{transform:translateY(0) rotate(-45deg) scale(0.6);opacity:0}
      10%{opacity:1}
      100%{transform:translateY(-140vh) rotate(45deg) scale(1.2);opacity:0}
    }

    /* main card */
    .card{
      width:100%;max-width:820px;background:var(--card);border-radius:18px;padding:28px;box-shadow:0 10px 40px rgba(0,0,0,0.12);
      backdrop-filter: blur(6px);position:relative;overflow:hidden;
    }

    .header{display:flex;gap:16px;align-items:center}
    .logo{font-family:'Great Vibes',cursive;font-size:40px;color:var(--accent);line-height:1}
    .subtitle{color:#333;opacity:0.85}

    .content{display:flex;flex-direction:column;gap:20px;margin-top:16px}

    .preview{
      background:linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.6));
      border-radius:12px;padding:28px;min-height:160px;display:flex;align-items:center;justify-content:center;text-align:center;
      font-size:22px;color:#7b3a46;font-weight:600;position:relative;
    }

    .message{font-size:22px}
    .from{position:absolute;right:14px;bottom:10px;font-size:13px;color:#7b3a46;opacity:0.9}

    .controls{display:flex;gap:12px;flex-wrap:wrap}
    .btn{
      background:var(--accent);color:white;border:none;padding:12px 18px;border-radius:12px;cursor:pointer;font-weight:700;box-shadow:0 6px 18px rgba(0,0,0,0.12);
      transition:transform .12s ease, box-shadow .12s ease;display:inline-flex;align-items:center;gap:8px
    }
    .btn:active{transform:translateY(2px)}
    .btn.secondary{background:transparent;color:var(--accent);border:2px solid rgba(255,77,109,0.12)}

    .heart-btn{display:inline-block;width:20px;height:20px;transform:scale(1.05);}

    /* pulse behind button */
    .pulse{position:absolute;inset:auto 0 -40px 0;height:30px;display:flex;justify-content:center}
    .pulse .dot{width:120px;height:120px;border-radius:50%;background:radial-gradient(circle at center, rgba(255,77,109,0.14), transparent);animation:pulse 2s infinite}
    @keyframes pulse{0%{transform:scale(.9)}50%{transform:scale(1.06)}100%{transform:scale(.9)}}

    /* small footer */
    .meta{display:flex;justify-content:space-between;align-items:center;margin-top:8px;color:#7b3a46;opacity:0.9}

    /* confetti canvas sits on top */
    canvas.confetti{position:absolute;inset:0;pointer-events:none}

    /* responsive */
    @media (max-width:640px){.logo{font-size:34px}.preview{font-size:18px;padding:20px}}
  </style>
</head>
<body>
  <!-- Password Screen -->
<div id="pwdScreen" style="
  position:fixed; inset:0; background:linear-gradient(135deg,#ffafbd,#ffc3a0);
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  z-index:99999; font-family:'Inter'; text-align:center; padding:20px;
">
  <h2 style="color:#fff; font-size:32px; margin-bottom:20px;">
    Em c√≥ ƒëi·ªÅu mu·ªën g·ª≠i cho anh üíó<br>Nh·∫≠p m·∫≠t kh·∫©u ƒëi ·∫°:
  </h2>
  <input id="pwdInput" type="password" placeholder="M·∫≠t kh·∫©u c·ªßa anh..."
    style="padding:14px 18px; border:none; border-radius:14px; font-size:18px; width:260px; text-align:center;">
  <button onclick="checkPwd()" style="
    margin-top:20px; padding:12px 20px; border:none; border-radius:14px;
    background:#ff4d6d; color:white; font-weight:700; font-size:18px;
    cursor:pointer; box-shadow:0 6px 18px rgba(0,0,0,0.15);
  ">M·ªü qu√† üíù</button>

  <div id="pwdError" style="color:#fff; margin-top:14px; font-size:16px; display:none;">
    Sai r·ªìi n√® anh üò≥ th·ª≠ l·∫°i ƒëi.
  </div>
</div>

  <div class="hearts" id="hearts"></div>

  <div class="card" role="main">
    <canvas class="confetti" id="conf"></canvas>
    <div class="header">
      <div class="logo">G·ª≠i Anh</div>
      <div class="subtitle">ƒê√¢y l√† m√≥n qu√† nh·ªè c·ªßa em, hy v·ªçng n√≥ s·∫Ω ti·∫øp th√™m s·ª©c m·∫°nh m·ªói khi anh m·ªát </div>
    </div>

    <div class="content">
      <div class="preview" id="preview">
        <div class="message" id="message">Nh·∫•n n√∫t "Nh·∫≠n l·ªùi ch√∫c" ƒë·ªÉ nh·∫≠n m·ªôt c√¢u ch√∫c b·∫•t ng·ªù nh√©, anh y√™u üíå</div>
        <div class="from" id="from">Embe c·ªßa anh ‚ù§Ô∏è</div>
      </div>

      <div class="controls">
        <button class="btn" id="btnRandom">
          <svg class="heart-btn" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 21s-7-4.58-9.06-7.04C1.64 11.9 3.1 7 7 6.04c2-.6 4.02.56 5 2.04 0 0 1.21-2.64 4-2.04 3.9.96 5.36 5.86 4.06 7.92C19 16.42 12 21 12 21z" fill="white"/></svg>
          Nh·∫≠n l·ªùi ch√∫c
        </button>

        <!-- <button class="btn secondary" id="btnReset">Xem l·∫°i t·∫•t c·∫£</button> -->

        <!-- <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
          <input id="nameInput" placeholder="G√µ t√™n ng∆∞·ªùi nh·∫≠n (v√≠ d·ª•: em y√™u)" style="padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);min-width:180px" />
          <button class="btn secondary" id="btnSaveName">L∆∞u t√™n</button>
        </div> -->
      </div>
      
      <div class="meta">
        <!-- <div>Thi·∫øt k·∫ø: Embe c·ªßa anh ‚ù§Ô∏è</div> -->
        <!-- <div id="counter">C√≤n l·∫°i: <span id="leftCount">0</span> l·ªùi.</div> -->
      </div>
    </div>
  </div>

  <script>
    // ====== Messages array (t√πy ch·ªânh ·ªü ƒë√¢y) ======
    const messages = [
    "Anh ∆°i, ch√∫c anh l√∫c n√†o c≈©ng vui nh∆∞ l√∫c n√≥i chuy·ªán v·ªõi em.",
    "H√¥m nay nh·∫•t ƒë·ªãnh ph·∫£i l√† m·ªôt ng√†y nh·∫π nh√†ng v·ªõi anh nha.",
    "C√≥ anh trong ƒë·ªùi l√†m tr√°i tim em b√¨nh y√™n h∆°n r·∫•t nhi·ªÅu.",
    "D√π c·∫£ th·∫ø gi·ªõi quay l∆∞ng, em v·∫´n ch·ªçn ƒë·ª©ng c·∫°nh anh.",
    "Ch√∫c anh lu√¥n t·ªèa s√°ng theo c√°ch ri√™ng c·ªßa m√¨nh.",
    "Anh l√† ngu·ªìn c·∫£m h·ª©ng ƒë·ªÉ em c·ªë g·∫Øng m·ªói ng√†y, s·ª± th·∫≠t ƒë√≥a :)).",
    "Em mong m·ªçi ƒëi·ªÅu t·ªët ƒë·∫πp nh·∫•t ƒë·ªÅu t√¨m ƒë·∫øn anh.",
    "Anh ∆°i, nh·ªõ u·ªëng n∆∞·ªõc v√† chƒÉm s√≥c b·∫£n th√¢n nhaaaa.",
    "Ng√†y mai d√π th·∫ø n√†o, em v·∫´n ·ªü ƒë√¢y ·ªßng h·ªô anh.",
    "Anh m·∫°nh m·∫Ω, nh∆∞ng kh√¥ng c·∫ßn ph·∫£i m·∫°nh m·∫Ω m·ªôt m√¨nh ƒë√¢u. (v√¨ c√≥ e ·ªü ƒë√¢y m√≤oo)",
    "C·∫£m ∆°n anh v√¨ ƒë√£ ƒë·ªÉ em b∆∞·ªõc v√†o cu·ªôc s·ªëng c·ªßa anh.",
    "Anh n√≥i em n·∫øu anh c·∫ßn m·ªôt c√°i √¥m th·∫≠t ch·∫∑t",
    "N·∫øu anh m·ªát, c·ª© ƒë·ªÉ em √¥m anh m·ªôt c√°i cho ƒë·ª° m·ªát.",
    "Ch√∫c anh lu√¥n th√†nh c√¥ng v·ªõi nh·ªØng ƒëi·ªÅu anh ƒëang theo ƒëu·ªïi.",
    "Anh x·ª©ng ƒë√°ng v·ªõi nh·ªØng ƒëi·ªÅu t·ªët ƒë·∫πp nh·∫•t.",
    "Tr√°i tim em r·∫•t ngoan, n√≥ ch·ªâ h∆∞·ªõng v·ªÅ m√¨nh anh th√¥i ·ªçe.",
    "Ch√∫c anh h√¥m nay g·∫∑p nhi·ªÅu ni·ªÅm vui b·∫•t ng·ªù.",
    "Anh l√† l√Ω do khi·∫øn ng√†y c·ªßa em b·∫≠n‚Ä¶ nghƒ© v·ªÅ anh.",
    "∆Ø·ªõc g√¨ gi√¢y ph√∫t n√†y em ƒëang ƒë∆∞·ª£c c·∫°nh anh :((( ).",
    "C·∫£ ng√†y em ch·ªâ mu·ªën ch·∫°y ƒë·∫øn √¥m anh m·ªôt c√°i thi·ªát l√† l√¢u.",
    "Mong anh lu√¥n m·∫°nh kh·ªèe l√¢u thi·ªát l√¢u.",
    "Anh ƒë·ª´ng th·ª©c khuya n·ªØa, em th∆∞∆°ng l·∫Øm.",
    "Em tin anh nhi·ªÅu h∆°n anh nghƒ©.",
    "Ch√∫c anh lu√¥n c√≥ nh·ªØng ng∆∞·ªùi t·ªët xung quanh.",
    "Anh l√† ch·ªó d·ª±a tinh th·∫ßn m√† em lu√¥n h∆∞·ªõng ƒë·∫øn.",
    "Ch√∫c anh l√†m vi·ªác g√¨ c≈©ng thu·∫≠n l·ª£i.",
    "Mong h√¥m nay mang ƒë·∫øn cho anh nhi·ªÅu ƒëi·ªÅu vui.",
    "V√† c≈©ng l√† ng∆∞·ªùi em nghƒ© ƒë·∫øn cu·ªëi c√πng tr∆∞·ªõc khi ng·ªß.",
    "Anh ∆°i, ƒë·ª´ng bu·ªìn l√¢u, em ·ªü ƒë√¢y m√†.",
    "Em mong anh l√∫c n√†o c≈©ng b√¨nh an.",
    "Ch√∫c anh lu√¥n gi·ªØ ƒë∆∞·ª£c tr√°i tim ·∫•m √°p c·ªßa m√¨nh.",
    "Ch√∫c anh h√¥m nay g·∫∑p to√†n chuy·ªán d·ªÖ th∆∞∆°ng.",
    "Em mu·ªën th·∫•y t∆∞∆°ng lai m√† trong ƒë√≥ c√≥ anh.",
    "Anh l√† kho·∫£ng tr·ªùi nh·ªè m√† em lu√¥n h∆∞·ªõng t·ªõi.",
    "Ch√∫c anh lu√¥n v·ªØng v√†ng tr∆∞·ªõc m·ªçi chuy·ªán.",
    "Em tin anh s·∫Ω l√†m ƒë∆∞·ª£c t·∫•t c·∫£ nh·ªØng g√¨ anh m∆° ∆∞·ªõc.",
    "C·∫£m ∆°n anh ƒë√£ xu·∫•t hi·ªán ƒë√∫ng l√∫c em c·∫ßn. (ƒë·∫∑c bi·ªát l√† l√∫c e say)",
    "Mong anh s·∫Ω lu√¥n t√¨m ƒë∆∞·ª£c ƒëi·ªÅu anh mu·ªën.",
    "Anh x·ª©ng ƒë√°ng ƒë∆∞·ª£c y√™u th∆∞∆°ng nhi·ªÅu h∆°n.",
    "Ch√∫c anh lu√¥n vui v·∫ª nh∆∞ c√°ch anh l√†m em vui.",
    "Tr√™n ƒë·ªùi n√†y, anh ƒë·∫∑c bi·ªát theo c√°ch r·∫•t ri√™ng :3",
    "Ch√∫c anh l√∫c n√†o c≈©ng tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng t·ªët.",
    "Anh l√† s·ª± ·∫•m √°p m√† em lu√¥n mu·ªën d·ª±a v√†o.",
    "H√¥m nay tr·ªùi ƒë·∫πp, nh∆∞ng kh√¥ng ƒë·∫πp b·∫±ng anh h·∫π h·∫π.",
    "Ch√∫c anh g·∫∑p nhi·ªÅu ƒëi·ªÅu d·ªÖ th∆∞∆°ng nh∆∞ ch√≠nh anh.",
    "N·∫øu anh th·∫•y m·ªát, h√£y nghƒ© ƒë·∫øn em m·ªôt ch√∫t.",
    "Em lu√¥n mu·ªën ƒëem ƒëi·ªÅu t·ªët ƒë·∫øn cho anh.",
    "M·ªói th√†nh c√¥ng c·ªßa anh ƒë·ªÅu l√† ni·ªÅm vui c·ªßa em.",
    "Ch√∫c anh lu√¥n ki√™n ƒë·ªãnh v·ªõi con ƒë∆∞·ªùng c·ªßa m√¨nh.",
    "Anh ∆°i, nh·ªõ ƒÉn u·ªëng ƒë·∫ßy ƒë·ªß nha.",
    "Mong anh kh√¥ng bao gi·ªù c·∫£m th·∫•y c√¥ ƒë∆°n.",
    "Em lu√¥n ƒë·ª©ng ph√≠a sau ƒë·ªÉ ƒë·ª° anh n·∫øu anh ng√£, nh∆∞ng m√† a n·∫∑ng qu√° th√¨ em kh√¥ng ch·∫Øc.",
    "Ng√†y n√†o c≈©ng n√™n l√† ng√†y t·ªët l√†nh c·ªßa anh.",
    "Ch√∫c anh lu√¥n g·∫∑p ng∆∞·ªùi t·ªët v√† chuy·ªán t·ªët.",
    "Em th√≠ch nh√¨n anh c·ªë g·∫Øng v√¨ ∆∞·ªõc m∆°.",
    "Anh l√†m em tin v√†o nh·ªØng ƒëi·ªÅu ƒë·∫πp ƒë·∫Ω.",
    "Ch√∫c anh kh√¥ng lo, kh√¥ng bu·ªìn v√† kh√¥ng stress.",
    "Anh kh√¥ng ho√†n h·∫£o, nh∆∞ng ƒë·ªëi v·ªõi em l√† ƒë·ªß.",
    "Em bi·∫øt anh r·∫•t m·∫°nh m·∫Ω, nh∆∞ng v·∫´n mu·ªën ƒë∆∞·ª£c che ch·ªü anh.",
    "Ch√∫c anh l√∫c n√†o c≈©ng r·∫°ng r·ª°.",
    "Em mu·ªën anh lu√¥n h·∫°nh ph√∫c‚Äîk·ªÉ c·∫£ nh·ªØng l√∫c kh√¥ng c√≥ em.",
    "Anh l√† ƒëi·ªÅu ƒë·∫∑c bi·ªát m√† em ch·∫≥ng t√¨m ƒë∆∞·ª£c l·∫ßn hai.",
    "Ch√∫c anh ƒë∆∞·ª£c y√™u th∆∞∆°ng ƒë√∫ng nh∆∞ nh·ªØng g√¨ anh cho ƒëi.",
    "Anh l√† n∆°i b√¨nh y√™n nh·∫•t c·ªßa em.",
    "Ch√∫c anh lu√¥n gi·ªØ n·ª• c∆∞·ªùi x·∫•u trai ƒë√≥.",
    "Ch√∫c anh c√≥ th·∫≠t nhi·ªÅu c∆° h·ªôi t·ªët.",
    "C·∫£m ∆°n anh v√¨ ƒë√£ t·ª≠ t·∫ø v·ªõi em.",
    "Anh l√† ƒëi·ªÅu ng·ªçt ng√†o nh·∫•t m√† em t·ª´ng c√≥.",
    "Ch√∫c anh lu√¥n c√≥ nh·ªØng ng∆∞·ªùi hi·ªÉu v√† tr√¢n tr·ªçng anh.",
    "Em ∆∞·ªõc g√¨ l√∫c n√†o c≈©ng ƒë∆∞·ª£c c·∫°nh anh.",
    "Anh l√† ph·∫ßn ƒë·∫πp nh·∫•t trong cu·ªôc s·ªëng c·ªßa em.",
    "Ch√∫c anh ƒë∆∞·ª£c b√¨nh an t·ª´ t√¢m, an nhi√™n trong l√≤ng.",
    "V√† cu·ªëi c√πng‚Ä¶ ch√∫c anh bi·∫øt r·∫±ng em th∆∞∆°ng anh nhi·ªÅu l·∫Øm.",
      "H√¥m nay l√† ng√†y 14/9. Em s·∫Ω vi·∫øt cho anh ƒë·∫øn ng√†y sinh nh·∫≠t c·ªßa anh ‚ù§",
    "Anh to√†n ƒëi l√†m ch·∫£ quan t√¢m em, d·ªói v√£i.",
    "G·ªçi anh l√† con cu, v√¨ anh l√† c·ªßa qu√Ω c·ªßa em :3",
    "Nhi·ªÅu khi th∆∞∆°ng anh vl nh∆∞ng ng·∫°i n√≥i ra. Mong anh bi·∫øt, anh kh√¥ng bi·∫øt th√¨ thui.",
    "Nh√¢n vi√™n m·ªõi, nh√¢n vi√™n m·ªõi, nh√¢n vi√™n m·ªõi. C√°i g√¨ em gh√©t nh·∫Øc l·∫°i 3 l·∫ßn.",
    "Ch√∫c anh tu·ªïi m·ªõi lu√¥n h·∫°nh ph√∫c (v·ªõi ai c≈©ng ƒë∆∞·ª£c).",
    "Ch√∫c anh tu·ªïi m·ªõi g·∫∑p ng∆∞·ªùi c√≥ th·ªÉ m·ªü l√≤ng t√¢m s·ª± ƒë·ªÉ kh√¥ng ph·∫£i m·ªôt m√¨nh ƒë·ªëi m·∫∑t v·ªõi t·∫•t c·∫£.",
    "Ph·∫£i lu√¥n nh·ªõ r·∫±ng anh kh√¥ng c√¥ ƒë∆°n, em ƒë√¢y m√†.",
    "Em bi·∫øt anh ƒë√£ c·ªë g·∫Øng, n·ªó l·ª±c r·∫•t nhi·ªÅu r·ªìi. Em th∆∞∆°ng anh l·∫Øm.",
    "Em kh√¥ng bi·∫øt n√™n vi·∫øt nh·ªØng ƒëi·ªÅu n√†y ra gi·∫•y hay l√†m c√°i web cho anh d·ªÖ xem tr√™n ƒëi·ªán tho·∫°i.",
    "Khi n√†o anh bu·ªìn hay c√≥ g√¨ vui, hy v·ªçng anh nh·ªõ ƒë·∫øn em ƒë·ªÉ t√¢m s·ª±.",
    "√ä c√°i n√†y th√∫ v·ªã th·∫∑c, em c√≥ nhi·ªÅu ƒëi·ªÅu kh√¥ng n√≥i ƒë∆∞·ª£c n√™n em s·∫Ω vi·∫øt nh√©.",
    "B√¢y gi·ªù em chu·∫©n b·ªã qu√† tr∆∞·ªõc nh∆∞ng m√† kh√¥ng bi·∫øt ƒë·∫øn sinh nh·∫≠t anh em c√≥ d·ªãp t·∫∑ng kh√¥ng :((",
    "B·ªØa nay em b·ª±c em b·ªè anh v√¥ h·∫°n ch·∫ø ƒë√≥, hy v·ªçng anh kh√¥ng bi·∫øt :( khi n√†o h·∫øt d·ªói em b·ªè ra l·∫°i :))",
    "Ch√∫c anh s·ª©c kho·∫ª tr√†n ƒë·∫ßy, s·ªëng l√¢u trƒÉm tu·ªïi.",
    "Ch√∫c anh kh√¥ng l√†m b·∫°n th√¢n v·ªõi tay ph·∫£i.",
    "Ch√∫c anh sung m√£n nh∆∞ l·∫ßn ƒë·∫ßu em g·∫∑p anh ü§°",
    "Ch√∫c anh m·ªói ng√†y th·ª©c d·∫≠y ƒë·ªÅu c·∫£m th·∫•y vui.",
    "N·∫øu m√† √°p l·ª±c hay m·ªát m·ªèi qu√° th√¨ √¥m em n√®.",
    "ƒê·ª´ng th√¢n m·∫≠t qu√°, em ghen ƒë√≥ üòí",
    "C·ª± Gi·∫£i vui v·∫ª, n√≥i chuy·ªán linh ho·∫°t v·ªõi m·ªçi ng∆∞·ªùi nh∆∞ng ch·ªâ m·ªü l√≤ng t√¢m s·ª± v·ªõi ng∆∞·ªùi h·ªç cho l√† quan tr·ªçng.",
    "T·ª´ nay v·ªÅ sau n·∫øu c√≥ ƒë∆∞·ª£c ng·ªß chung v·ªõi nhau th√¨ anh nh·ªõ √¥m em c·∫£ ƒë√™m v·ªõi cho em g√°c nhaaa.",
    "Em kh√¥ng mu·ªën anh h∆∞ ƒë√¢u.",
    "Nhi·ªÅu khi mu·ªën n·∫Øc m√† nh·∫Øn tin anh kh√¥ng tr·∫£ l·ªùi :))",
    "Ch√∫c anh ch√¢n c·ª©ng ƒë√° m·ªÅm, ƒë·∫∑c bi·ªát l√† ch√¢n gi·ªØa üòÜ",
    "Ch√∫c anh trong t√∫i c√≥ ti·ªÅn, trong tim c√≥ t√¨nh iuuu.",
    "C√°i √°o em ph·∫£i canh c·∫£ th√°ng m·ªõi mua ƒë∆∞·ª£c ƒë√≥ ·∫°, hy v·ªçng anh th√≠ch n√≥ -.-"
  ];

  const PASS = "0612";
  function checkPwd() {
    const input = document.getElementById('pwdInput').value;
    const err = document.getElementById('pwdError');
    if (input === PASS) {
      document.getElementById('pwdScreen').style.opacity = 0;
      setTimeout(()=> document.getElementById('pwdScreen').remove(), 600);
    } else {
      err.style.display = "block";
    }
  }

    // Copy and manage unused pool so we don't repeat until all shown
    let pool = [...messages];
    const messageEl = document.getElementById('message');
    const fromEl = document.getElementById('from');
    const leftCountEl = document.getElementById('leftCount');
    const nameInput = document.getElementById('nameInput');

    function updateCounter(){ leftCountEl.textContent = pool.length }
    updateCounter();

    // personalize name
    const savedName = localStorage.getItem('gift_name') || 'Ng∆∞·ªùi t·∫∑ng';
    fromEl.textContent = '‚Äî ' + savedName;
    nameInput.value = localStorage.getItem('gift_name_input') || '';

    document.getElementById('btnSaveName').addEventListener('click', ()=>{
      const v = nameInput.value.trim();
      if(v){ localStorage.setItem('gift_name', v); localStorage.setItem('gift_name_input', v); fromEl.textContent = '‚Äî ' + v; }
      else{ localStorage.removeItem('gift_name'); localStorage.removeItem('gift_name_input'); fromEl.textContent = '‚Äî Ng∆∞·ªùi t·∫∑ng'; }
    });

    document.getElementById('btnRandom').addEventListener('click', ()=>{
      if(pool.length === 0){ // re-seed if empty
        pool = [...messages];
      }
      const idx = Math.floor(Math.random()*pool.length);
      const pick = pool.splice(idx,1)[0];
      showMessage(pick);
      updateCounter();
      launchConfetti();
    });

    document.getElementById('btnReset').addEventListener('click', ()=>{
      pool = [...messages];
      updateCounter();
      showMessage('ƒê√£ ƒë·∫∑t l·∫°i danh s√°ch l·ªùi ch√∫c ‚Äî b·∫•m "Nh·∫≠n l·ªùi ch√∫c" ƒë·ªÉ ti·∫øp t·ª•c!');
    });

    function showMessage(text){
      messageEl.style.opacity = 0;
      setTimeout(()=>{ messageEl.textContent = text; messageEl.style.opacity = 1 }, 220);
    }

    // ====== Floating hearts generator ======
    const heartsContainer = document.getElementById('hearts');
    function spawnHeart(){
      const h = document.createElement('i');
      h.className = 'heart';
      const size = Math.random()*28 + 16; // 16 - 44px
      h.style.width = size+'px'; h.style.height = size+'px';
      h.style.left = Math.random()*100 + '%';
      h.style.animationDuration = (8 + Math.random()*8) + 's';
      h.style.opacity = Math.random()*0.6 + 0.4;
      heartsContainer.appendChild(h);
      setTimeout(()=>{ h.remove() }, 16000);
    }
    // spawn a few at start and then interval
    for(let i=0;i<8;i++) setTimeout(spawnHeart, i*600);
    setInterval(spawnHeart, 1200);

    // ====== Simple confetti on canvas ======
    const canvas = document.getElementById('conf');
    const ctx = canvas.getContext('2d');
    let W = canvas.width = window.innerWidth;
    let H = canvas.height = window.innerHeight;
    window.addEventListener('resize', ()=>{ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight });

    const particles = [];
    function launchConfetti(){
      const count = 28;
      for(let i=0;i<count;i++){
        particles.push({
          x: Math.random()*W, y: -10 - Math.random()*80,
          vx: (Math.random()-0.5)*6, vy: 2 + Math.random()*5,
          size: 4 + Math.random()*8,
          rot: Math.random()*360,
          life: 60 + Math.floor(Math.random()*60),
          color: `hsl(${Math.floor(Math.random()*360)},70%,60%)`
        });
      }
    }

    function confettiLoop(){
      ctx.clearRect(0,0,W,H);
      for(let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        p.x += p.vx; p.y += p.vy; p.vy += 0.08; p.rot += 6;
        ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot * Math.PI/180);
        ctx.fillStyle = p.color; ctx.fillRect(-p.size/2,-p.size/2,p.size,p.size*1.6);
        ctx.restore();
        p.life--;
        if(p.y > H + 40 || p.life <= 0) particles.splice(i,1);
      }
      requestAnimationFrame(confettiLoop);
    }
    confettiLoop();

    // optional: start with a gentle confetti
    setTimeout(()=>{ launchConfetti() }, 600);

    // accessibility: keyboard: space or enter triggers
    document.addEventListener('keydown',(e)=>{
      if(e.code === 'Space' || e.code === 'Enter'){
        e.preventDefault(); document.getElementById('btnRandom').click();
      }
    });

  </script>
  <!-- Loading Screen -->
  <div id="loading" style="position:fixed;inset:0;background:linear-gradient(135deg,#ffafbd,#ffc3a0);display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:9999;color:white;font-family:'Inter';transition:opacity .6s">
    <div style="font-size:32px;font-weight:700;margin-bottom:20px">Anh ƒë·ª£i ebe 1 x√≠u ·∫°‚Ä¶ üíó</div>
    <div class="loader" style="width:70px;height:70px;border-radius:50%;border:6px solid rgba(255,255,255,0.4);border-top-color:white;animation:spin 1s linear infinite"></div>
  </div>

  <style>
    @keyframes spin {from{transform:rotate(0)} to{transform:rotate(360deg)}}
  </style>

  <script>
    // Loading 10s
    window.addEventListener('load', ()=>{
      setTimeout(()=>{
        const ld = document.getElementById('loading');
        ld.style.opacity = 0;
        setTimeout(()=> ld.remove(), 600);
      }, 10000); // 10s
    });
  </script>

  <!-- Loading for message -->
  <div id="loadingMsg" style="position:fixed;inset:0;background:rgba(0,0,0,0.45);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;flex-direction:column;z-index:9998;color:white;font-family:'Inter';transition:opacity .4s">
    <div style="font-size:26px;font-weight:600;margin-bottom:18px">ƒêang chu·∫©n b·ªã l·ªùi ch√∫c cho anh‚Ä¶ üíó</div>
    <div class="loader2" style="width:55px;height:55px;border-radius:50%;border:6px solid rgba(255,255,255,0.4);border-top-color:white;animation:spin 1s linear infinite"></div>
  </div>

  <script>
    const loadingMsg = document.getElementById('loadingMsg');
    const originalShowMessage = showMessage;

    // Override random button behavior with loading 10s
    document.getElementById('btnRandom').addEventListener('click', async (e)=>{
      e.stopImmediatePropagation(); // prevent double firing
      loadingMsg.style.display = 'flex';
      loadingMsg.style.opacity = 1;

      await new Promise(r => setTimeout(r, 1)); // 10s loading

      loadingMsg.style.opacity = 0;
      setTimeout(()=> loadingMsg.style.display = 'none', 500);

      // execute original logic
      if(pool.length === 0) pool = [...messages];
      const idx = Math.floor(Math.random()*pool.length);
      const pick = pool.splice(idx,1)[0];
      originalShowMessage(pick);
      updateCounter();
      launchConfetti();
    }, true);
  </script>

</body>
</html>
